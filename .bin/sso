#!/bin/zsh

zmodload zsh/net/tcp

(($# >= 3)) || {
    echo "Usage:\n\t$0 hostname port message"
    exit 1
}

ztcp $1 $2
fd=$REPLY

[[ "$fd" == <-> ]] || exit 1

echo ${*[3,-1]} >&$fd
ztcp -c $fd
