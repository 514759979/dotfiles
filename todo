写入还是用原来的方式，避免对同一个文件的同时写操作
有单独的线程（或者单独的脚本）每隔一段时间（考虑5小时），进行一次合并操作，只有这一个线程可以对合并文件进行写操作，先写data文件，写成功后再写index，写成功了再删除原文件
读是先读单个文件，没有的话再去读合并文件（内存中维护一个index文件对应的map，不每次都解析index文件，更新map时使用copy on write，由那个单独线程处理，避免读时频繁加锁）
如果文件需要作为参数给其他命令使用，需要创建临时文件，名称不和原来文件名一致，运行完立即删除
文件体积也不是很大，不进行压缩

文件格式？
index文件:
文件名:起始地址:偏移地址
...

data文件:
文件名_noah-client_begin\n
real_data\n
noah-client_end\n
\n
real_data前后加入内容有助于手工查看和检查正确性,index对应位置只是real_data部分的

文件损坏的考虑？
什么情况会损害？
1.client异常退出，写入线程正在写，可能没有写完，或磁盘空间不足，没有写全
2.文件本身损坏

每次写入是先检查之前所有数据是否正常，主要是data前后是否是noah-client_begin/noah-client_end，如果是可认为现在文件无问题，然后继续追加内容
如果发现从某个记录开始不对了，index文件从此之后的内容清除（可能会丢失历史数据，但文件损坏不会经常发生，补救代价很高），然后再继续
